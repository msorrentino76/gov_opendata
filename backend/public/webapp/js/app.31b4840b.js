(function(){"use strict";var e={4092:function(e,a,t){var l=t(9242),r=t(3396),n=t(2268),o=t(4870),i=t(6666),u=t(7178),s=t(1076),d=t(6154),m=t(7139),c=t(2415),p=(0,m.MT)({state:{logged:!1,token:null,user:null,data_filter:!1,data_filter_quote:!1,config:{applicationBaseURL:"http://localhost/NumiPort/backend/public"}},mutations:{login(e,a){a.user.abilities=JSON.parse(a.user.abilities),e.logged=!0,e.token=a.token,e.user=a.user},logout(e){e.logged=!1,e.token=null,e.user=null,e.data_filter=!1,e.data_filter_quote=!1},updateUser(e,a){e.user=a},setDataFilter(e,a){e.data_filter=a},setDataFilterQuote(e,a){e.data_filter_quote=a}},plugins:[(0,c.Z)()]});const w=p.state.config.applicationBaseURL,v=s.Z.create({baseURL:w+"/api/",withCredentials:!0,withXSRFToken:!0});v.interceptors.request.use((e=>(e.headers.Accept="application/json",e.headers["Content-Type"]="application/json",e.headers.Authorization="Bearer "+p.state.token,e)));const f=()=>{(0,i.bM)({title:"Operazione riuscita",message:"Operazione conclusa con successo",type:"success"})},g=(e="Si è verificato un errore. Contattare l'Assistenza")=>{(0,i.bM)({title:"Errore",message:e,type:"error"})},b=async(e,a)=>{try{await v.get(w+"/sanctum/csrf-cookie");const t=await v.post(e,a);return p.commit("login",t.data),await t.data}catch(t){return S(t,"token")}},_=async e=>{try{return await v.delete(e),p.commit("logout"),await!0}catch(a){return S(a,"revoke")}},h=async e=>{try{const a=await v.get(e.content,{responseType:"blob"});return(0,d.saveAs)(a.data,e.name),!0}catch(a){return S(a,"download")}},y=async e=>{try{const a=await v.get(e);return await a.data}catch(a){return S(a,"list")}},k=async(e,a)=>{try{const t=await v.get(e,{params:a});return await t.data}catch(t){return S(t,"filteredList")}},W=async(e,a)=>{try{const t=await v.post(e,a);return f(),await t.data}catch(t){return S(t,"create")}},x=async(e,a)=>{try{const t=await v.get(e+"/"+a);return await t.data}catch(t){return S(t,"read")}},D=async(e,a,t=!1)=>{try{const l=await v.put(e+"/"+a.id,a);return t||f(),await l.data}catch(l){return S(l,"update")}},U=async(e,a,t=!1)=>{try{return await v.delete(e+"/"+a),t||f(),await!0}catch(l){return S(l,"del")}},S=(e,a)=>e.response&&401==e.response.status?"token"!=a?(p.commit("logout"),void(0,u.z8)({showClose:!0,message:"Sessione scaduta o non valida. Procedere nuovamente con il login",type:"warning",duration:8e3})):void(0,u.z8)({showClose:!0,message:"Credenziali non valide",type:"error",duration:8e3}):e.response&&422==e.response.status?e.response.data:(g(),console.error("Errore durante la chiamata API "+a+" :",e.code,e.message),"list"==a&&[]);var j=t(2748),C=t(7665),q=t.n(C),H={__name:"Icon",props:{icon:{}},setup(e){return(0,r.aZ)({name:"IconEl"}),(a,t)=>((0,r.wg)(),(0,r.iD)(r.HY,null,["user"==e.icon?((0,r.wg)(),(0,r.j4)((0,o.SU)(j.n5m),{key:0})):(0,r.kq)("",!0),"user-filled"==e.icon?((0,r.wg)(),(0,r.j4)((0,o.SU)(j.wvC),{key:1})):(0,r.kq)("",!0),"key"==e.icon?((0,r.wg)(),(0,r.j4)((0,o.SU)(j.srI),{key:2})):(0,r.kq)("",!0),"odometer"==e.icon?((0,r.wg)(),(0,r.j4)((0,o.SU)(j.Drq),{key:3})):(0,r.kq)("",!0),"avatar"==e.icon?((0,r.wg)(),(0,r.j4)((0,o.SU)(j.qEK),{key:4})):(0,r.kq)("",!0),"message"==e.icon?((0,r.wg)(),(0,r.j4)((0,o.SU)(j.v0C),{key:5})):(0,r.kq)("",!0),"upload-filled"==e.icon?((0,r.wg)(),(0,r.j4)((0,o.SU)(j.AQM),{key:6})):(0,r.kq)("",!0)],64))}};const z=H;var V=z;const M={class:"el-upload__text"},Y=(0,r._)("em",null,"Clicca qui per caricarli",-1),I={class:"el-upload__tip"},A=(0,r._)("br",null,null,-1),N=(0,r._)("br",null,null,-1);var T={__name:"Form",props:{formModel:{},formData:Array,action:Array,formLoading:Boolean,rules:Object,errors:{}},setup(e){const a=(0,o.iH)({}),t={Authorization:`Bearer ${p.state.token}`},l=async(e,a)=>(!1!==a&&await U(e,a,!0),!0);function i(){return Object.keys(d.value).reduce(((e,a)=>(e[a]=d.value[a],e)),{})}function u(e){var a=i();s.formModel.submit(a,e)}const s=e,d=(0,o.iH)(s.formData),m=(0,o.iH)(s.formLoading),c=(0,o.iH)(s.errors),w=(0,o.iH)(s.rules);(0,r.aZ)({name:"FormEl"}),(0,r.ic)((()=>{d.value=s.formData,m.value=s.formLoading,c.value=s.errors,w.value=s.rules}));const v=(0,o.iH)(""),f=e=>{switch(e.score){case 0:v.value="rischiosa";break;case 1:v.value="prevedibile";break;case 2:v.value="debole";break;case 3:v.value="sicura";break;case 4:v.value="molto sicura";break;default:v.value="";break}};return(i,s)=>{const g=(0,r.up)("el-icon"),b=(0,r.up)("el-input"),_=(0,r.up)("el-form-item"),h=(0,r.up)("el-text"),y=(0,r.up)("el-switch"),k=(0,r.up)("el-input-number"),W=(0,r.up)("el-date-picker"),x=(0,r.up)("el-upload"),D=(0,r.up)("el-alert"),U=(0,r.up)("el-col"),S=(0,r.up)("el-row"),j=(0,r.up)("el-button"),C=(0,r.up)("el-form"),H=(0,r.Q2)("loading");return(0,r.wy)(((0,r.wg)(),(0,r.j4)(C,{ref_key:"ruleFormRef",ref:a,model:d.value,disabled:e.formModel.disabled,rules:w.value,"label-position":"top","status-icon":""},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.formModel.fields,((a,i)=>((0,r.wg)(),(0,r.j4)(S,{gutter:20,key:i},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.row,((a,i)=>((0,r.wg)(),(0,r.j4)(U,{key:i,span:a.space},{default:(0,r.w5)((()=>[a.showOn&&-1===a.showOn.indexOf(e.action)?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:0},["input"==a.type?((0,r.wg)(),(0,r.j4)(_,{key:0,label:a.label,prop:a.name,error:c.value[a.name]?c.value[a.name]:""},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{modelValue:d.value[a.name],"onUpdate:modelValue":e=>d.value[a.name]=e,placeholder:a.placeholder?a.placeholder:""},(0,r.Nv)({_:2},[a.prepend?{name:"prepend",fn:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(a.prepend.text?a.prepend.text:"")+" ",1),a.prepend&&a.prepend.icon?((0,r.wg)(),(0,r.j4)(g,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(V,{icon:a.prepend.icon},null,8,["icon"])])),_:2},1024)):(0,r.kq)("",!0)])),key:"0"}:void 0,a.append?{name:"append",fn:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(a.append.text?a.append.text:"")+" ",1),a.append&&a.append.icon?((0,r.wg)(),(0,r.j4)(g,{key:0})):(0,r.kq)("",!0)])),key:"1"}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["label","prop","error"])):(0,r.kq)("",!0),"password"==a.type?((0,r.wg)(),(0,r.j4)(_,{key:1,label:a.label,prop:a.name,error:c.value[a.name]?c.value[a.name]:""},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{modelValue:d.value[a.name],"onUpdate:modelValue":e=>d.value[a.name]=e,type:"password","show-password":"",placeholder:a.placeholder?a.placeholder:""},(0,r.Nv)({_:2},[a.prepend?{name:"prepend",fn:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(a.prepend.text?a.prepend.text:"")+" ",1),a.prepend&&a.prepend.icon?((0,r.wg)(),(0,r.j4)(g,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(V,{icon:a.prepend.icon},null,8,["icon"])])),_:2},1024)):(0,r.kq)("",!0)])),key:"0"}:void 0,a.append?{name:"append",fn:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(a.append.text?a.append.text:"")+" ",1),a.append&&a.append.icon?((0,r.wg)(),(0,r.j4)(g,{key:0})):(0,r.kq)("",!0)])),key:"1"}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["label","prop","error"])):(0,r.kq)("",!0),a.showMeter?((0,r.wg)(),(0,r.j4)(h,{key:2,class:"mx-1",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)("Complessita password: "+(0,n.zw)(v.value),1)])),_:1})):(0,r.kq)("",!0),a.showMeter?((0,r.wg)(),(0,r.j4)((0,o.SU)(q()),{key:3,onScore:f,password:d.value[a.name]},null,8,["password"])):(0,r.kq)("",!0),"switch"==a.type?((0,r.wg)(),(0,r.j4)(_,{key:4,prop:a.name,error:c.value[a.name]?c.value[a.name]:""},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{modelValue:d.value[a.name],"onUpdate:modelValue":e=>d.value[a.name]=e,"active-text":a.activeText?a.activeText:"","inactive-text":a.inactiveText?a.inactiveText:""},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])])),_:2},1032,["prop","error"])):(0,r.kq)("",!0),"input-numeric"==a.type?((0,r.wg)(),(0,r.j4)(_,{key:5,label:a.label,prop:a.name,error:c.value[a.name]?c.value[a.name]:""},{default:(0,r.w5)((()=>[(0,r.Wm)(k,{modelValue:d.value[a.name],"onUpdate:modelValue":e=>d.value[a.name]=e,min:a.min,max:a.max,label:a.label,"controls-position":a.controlsPosition?a.controlsPosition:""},null,8,["modelValue","onUpdate:modelValue","min","max","label","controls-position"])])),_:2},1032,["label","prop","error"])):(0,r.kq)("",!0),"input-decimal"==a.type?((0,r.wg)(),(0,r.j4)(_,{key:6,label:a.label,prop:a.name,error:c.value[a.name]?c.value[a.name]:""},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{type:"number",modelValue:d.value[a.name],"onUpdate:modelValue":e=>d.value[a.name]=e,precision:2,min:0,step:.01,label:a.label},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1032,["label","prop","error"])):(0,r.kq)("",!0),"datapicker"==a.type?((0,r.wg)(),(0,r.j4)(_,{key:7,label:a.label,prop:a.name,error:c.value[a.name]?c.value[a.name]:""},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{modelValue:d.value[a.name],"onUpdate:modelValue":e=>d.value[a.name]=e,type:"date",placeholder:"Data attività",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","prop","error"])):(0,r.kq)("",!0),"text"==a.type?((0,r.wg)(),(0,r.j4)(_,{key:8,label:a.label,prop:a.name,error:c.value[a.name]?c.value[a.name]:""},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{modelValue:d.value[a.name],"onUpdate:modelValue":e=>d.value[a.name]=e,maxlength:"512",placeholder:"Descrizione dell'attività svolta","show-word-limit":"",type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","prop","error"])):(0,r.kq)("",!0),"upload"==a.type?((0,r.wg)(),(0,r.j4)(_,{key:9,label:a.label,prop:a.name,error:c.value[a.name]?c.value[a.name]:""},{default:(0,r.w5)((()=>[(0,r.Wm)(x,{ref_for:!0,ref:"upload",action:(0,o.SU)(p).state.config.applicationBaseURL+"/api"+a.uploadEndpoint+"?XDEBUG_SESSION_START=netbeans-xdebug",headers:t,accept:a.accept.mime,multiple:"",drag:"",limit:a.limit,"file-list":d.value[a.name],"onUpdate:fileList":e=>d.value[a.name]=e,"before-upload":e=>!(a.maxmbsize&&e.size/1024/1024>a.maxmbsize)||(c.value[a.name]="Il file "+e.name+" supera la dimensione massima consentita di "+a.maxmbsize+" Mb",!1),"before-remove":e=>{l(a.removeEndpoint,!(!e||!e.response)&&e.response.id)}},{tip:(0,r.w5)((()=>[(0,r._)("div",I," Accettati file "+(0,n.zw)(a.accept.label)+" di massimo "+(0,n.zw)(a.maxmbsize)+" Megabyte ",1)])),default:(0,r.w5)((()=>[(0,r.Wm)(g,{class:"el-icon--upload"},{default:(0,r.w5)((()=>[(0,r.Wm)(V,{icon:"upload-filled"})])),_:1}),(0,r._)("div",M,[(0,r.Uk)(" Trascina qui i files (massimo "+(0,n.zw)(a.limit)+") oppure ",1),Y])])),_:2},1032,["action","accept","limit","file-list","onUpdate:fileList","before-upload","before-remove"])])),_:2},1032,["label","prop","error"])):(0,r.kq)("",!0),"alert-success"==a.type?((0,r.wg)(),(0,r.j4)(D,{key:10,title:a.text,"show-icon":"",type:"success"},null,8,["title"])):(0,r.kq)("",!0),"alert-info"==a.type?((0,r.wg)(),(0,r.j4)(D,{key:11,title:a.text,"show-icon":"",type:"info"},null,8,["title"])):(0,r.kq)("",!0),"alert-warning"==a.type?((0,r.wg)(),(0,r.j4)(D,{key:12,title:a.text,"show-icon":"",type:"warning"},null,8,["title"])):(0,r.kq)("",!0),"alert-error"==a.type?((0,r.wg)(),(0,r.j4)(D,{key:13,title:a.text,"show-icon":"",type:"error"},null,8,["title"])):(0,r.kq)("",!0),A],64))])),_:2},1032,["span"])))),128))])),_:2},1024)))),128)),N,e.formModel.disabled?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(j,{key:0,type:"success",onClick:s[0]||(s[0]=e=>u(a.value))},{default:(0,r.w5)((()=>[(0,r.Uk)("Salva")])),_:1}))])),_:1},8,["model","disabled","rules"])),[[H,m.value]])}}};const O=T;var F=O;const L=(0,r._)("h4",null,"Anagrafica e dati di account",-1),P=(0,r._)("br",null,null,-1),Z=(0,r._)("br",null,null,-1),E=(0,r._)("br",null,null,-1),R=(0,r._)("br",null,null,-1),B=(0,r._)("h4",null,"Cambio Password",-1),Q=(0,r._)("br",null,null,-1);var K={__name:"Profilo",setup(e){const a=(0,o.iH)([]),t=(0,o.iH)([]),l=(0,o.iH)([]),n=(0,o.iH)(!1),i=(0,o.iH)(!1),u={submit:(e,a)=>{c(e,a)},disabled:!1,fields:[{row:[{type:"input",label:"Nome",name:"name",prepend:{icon:"avatar"},space:8},{type:"input",label:"Cognome",name:"surname",prepend:{icon:"avatar"},space:8}]},{row:[{type:"input",label:"Username",name:"username",prepend:{icon:"user-filled"},space:8},{type:"input",label:"Email",name:"email",prepend:{icon:"message"},space:8}]},{row:[{type:"switch",activeText:"Ricevi notifiche anche via email",name:"notify_email",space:8}]}]},s={submit:(e,a)=>{w(e,a)},disabled:!1,fields:[{row:[{type:"password",label:"Password attuale",name:"password",prepend:{icon:"key"},space:8}]},{row:[{type:"password",label:"Nuova password",name:"new_password",showMeter:!0,prepend:{icon:"key"},space:8}]},{row:[{type:"password",label:"Conferma nuova password",name:"confirm_new_password",prepend:{icon:"key"},space:8}]}]},d={name:[{required:!0,message:"Campo richiesto",trigger:"blur"}],surname:[{required:!0,message:"Campo richiesto",trigger:"blur"}],username:[{required:!0,message:"Campo richiesto",trigger:"blur"}],email:[{required:!0,message:"Campo richiesto",trigger:"blur"},{type:"email",message:"Inserire un indirizzo email valido",trigger:["blur","change"]}]},m={password:[{required:!0,message:"Campo richiesto",trigger:"blur"}],new_password:[{required:!0,message:"Campo richiesto",trigger:"blur"}],confirm_new_password:[{required:!0,message:"Campo richiesto",trigger:"blur"}]},c=async(e,t)=>{a.value={};const l=await t.validate((e=>e));if(!l)return!1;n.value=!0,e={...e,id:p.state.user.id};let r=await D("profile/account",e);r&&(r.errors?a.value=r.errors:p.commit("updateUser",r)),n.value=!1},w=async(e,a)=>{t.value={};const l=await a.validate((e=>e));if(!l)return!1;if(e.new_password!=e.confirm_new_password)return t.value={confirm_new_password:"La nuova password non coincide con il campo di conferma"},!1;i.value=!0,e={...e,id:p.state.user.id};let r=await D("profile/password",e);r&&(r.errors?t.value=r.errors:p.commit("updateUser",r)),i.value=!1};return(0,r.aZ)({name:"ProfiloView"}),(e,c)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[L,P,(0,r.Wm)(F,{formModel:u,rules:d,errors:a.value,formData:(0,o.SU)(p).state.user,action:[],formLoading:n.value},null,8,["errors","formData","formLoading"]),Z,E,R,B,Q,(0,r.Wm)(F,{formModel:s,rules:m,errors:t.value,formData:l.value,action:[],formLoading:i.value},null,8,["errors","formData","formLoading"])],64))}};const $=K;var X=$,G={__name:"Notifiche",props:{notifications:Array},setup(e){const a=(0,o.iH)([]),t=e;(0,r.ic)((()=>{a.value=t.notifications})),(0,r.aZ)({name:"NotificheView"});const l=({row:e})=>e.seen?"":"success-row",n=async()=>{await D("notifications/mark",{id:"all"},!0),a.value=a.value.map((e=>(e.seen=!0,e)))},i=async e=>{await D("notifications/mark",{id:e},!0),a.value=a.value.map((a=>(a.seen=a.id==e||a.seen,a)))},u=e=>{const a={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1},t=new Date(e.created_at);return t.toLocaleString("it-IT",a)};return(e,t)=>{const s=(0,r.up)("el-button"),d=(0,r.up)("el-tooltip"),m=(0,r.up)("el-table-column"),c=(0,r.up)("el-table"),p=(0,r.up)("el-text");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(s,{type:"primary",link:"",onClick:t[0]||(t[0]=e=>n())},{default:(0,r.w5)((()=>[(0,r.Uk)("Marca tutte come lette")])),_:1}),(0,r.Wm)(c,{data:a.value,style:{width:"100%"},"row-class-name":l,size:"small",height:"180","empty-text":"Nessuna notifica"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{width:"32"},{default:(0,r.w5)((e=>[(0,r.Wm)(d,{class:"box-item",effect:"dark",content:"Marca come letta",placement:"top-start",disabled:e.row.seen},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{type:e.row.seen?"info":"success",icon:(0,o.SU)(j.G7x),circle:"",size:"small",disabled:e.row.seen,onClick:a=>i(e.row.id)},null,8,["type","icon","disabled","onClick"])])),_:2},1032,["disabled"])])),_:1}),(0,r.Wm)(m,{prop:"created_at",label:"",formatter:u,width:"120"}),(0,r.Wm)(m,{prop:"message",label:""})])),_:1},8,["data"]),(0,r.Wm)(p,{class:"mx-1",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)("Ultime 25 notifiche")])),_:1})],64)}}};const J=G;var ee=J,ae={__name:"Assistenza",setup(e){const a={submit:e=>{l(e)},disabled:!1,fields:[{row:[{type:"input",label:"Nome",name:"name",prepend:{text:"http://"},space:8},{type:"input",label:"Cognome",name:"surname",append:{text:"APP"},space:8},{type:"input",label:"Codice fiscale",name:"fiscal_code",space:8,showOn:["read"]}]}]},t={name:[{required:!0,message:"Campo richiesto",trigger:"blur"}]},l=e=>{console.log("onSubmit PADRE:",e,e.surname,e["surname"])};return(0,r.aZ)({name:"AssistenzaView"}),(e,l)=>((0,r.wg)(),(0,r.j4)(F,{formModel:a,rules:t,errors:[],formData:[],action:[],formLoading:!1}))}};const te=ae;var le=te;const re={class:"main-header"},ne={key:0},oe={key:1};var ie={__name:"Header",props:{menuToggle:{type:Function}},setup(e){const a=(0,o.iH)(!1),t=(0,o.iH)(""),l=(0,o.iH)([]),n=(0,o.iH)(!1),i=async()=>{await _("revoke")},u=e=>{t.value=e,a.value=!0};(0,r.aZ)({name:"HeaderComponent"}),(0,r.bv)((async()=>{s()}));const s=async()=>{const e=await y("notifications/all");l.value=e.map((e=>(n.value||null!=e.read_at||(n.value=!0),{id:e.id,message:e.data.message,seen:null!=e.read_at,created_at:e.created_at})))},d=setInterval((()=>{m()}),3e5),m=async()=>{const e=await y("notifications/unread");n.value=0!=e.length;const a=e.map((e=>({id:e.id,message:e.data.message,seen:null!=e.read_at,created_at:e.created_at}))),t=[...a,...l.value];l.value=t.filter(((e,a,t)=>a===t.findIndex((a=>a.id===e.id)))).sort(((e,a)=>new Date(a.created_at)-new Date(e.created_at)))};return(0,r.Jd)((()=>{clearInterval(d)})),(e,s)=>{const d=(0,r.up)("el-badge"),m=(0,r.up)("el-button"),c=(0,r.up)("el-popover"),p=(0,r.up)("el-drawer");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("header",re,[(0,r.Wm)(c,{placement:"bottom",width:480,trigger:"click"},{reference:(0,r.w5)((()=>[(0,r.Wm)(m,{icon:(0,o.SU)(j.a3S),round:""},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{"is-dot":"",class:"item",hidden:!n.value},{default:(0,r.w5)((()=>[(0,r.Uk)(" Notifiche ")])),_:1},8,["hidden"])])),_:1},8,["icon"])])),default:(0,r.w5)((()=>[(0,r.Wm)(ee,{notifications:l.value},null,8,["notifications"])])),_:1}),(0,r.Wm)(m,{onClick:s[0]||(s[0]=e=>u("profile")),icon:(0,o.SU)(j.wvC),round:""},{default:(0,r.w5)((()=>[(0,r.Uk)("Profilo")])),_:1},8,["icon"]),(0,r.Wm)(m,{onClick:s[1]||(s[1]=e=>i()),icon:(0,o.SU)(j.U3h),round:""},{default:(0,r.w5)((()=>[(0,r.Uk)("Logout")])),_:1},8,["icon"])]),(0,r.Wm)(p,{modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=e=>a.value=e),direction:"rtl",size:"notification"==t.value?"25%":"75%"},{header:(0,r.w5)((()=>["profile"==t.value?((0,r.wg)(),(0,r.iD)("h4",ne,"Profilo")):(0,r.kq)("",!0),"assistance"==t.value?((0,r.wg)(),(0,r.iD)("h4",oe,"Assistenza")):(0,r.kq)("",!0)])),default:(0,r.w5)((()=>["profile"==t.value?((0,r.wg)(),(0,r.j4)(X,{key:0})):(0,r.kq)("",!0),"assistance"==t.value?((0,r.wg)(),(0,r.j4)(le,{key:1})):(0,r.kq)("",!0)])),_:1},8,["modelValue","size"])],64)}}};const ue=ie;var se=ue;const de=(0,r._)("br",null,null,-1),me=(0,r._)("br",null,null,-1);var ce={__name:"Aside",props:{collapseMenu:{},menuToggle:{type:Function}},setup(e){return(0,r.aZ)({name:"AsideComponent"}),(a,t)=>{const l=(0,r.up)("el-icon"),n=(0,r.up)("el-menu-item"),i=(0,r.up)("el-menu");return(0,r.wg)(),(0,r.j4)(i,{"default-active":a.$route.path,router:!0,collapse:e.collapseMenu},{default:(0,r.w5)((()=>[(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[e.collapseMenu?((0,r.wg)(),(0,r.j4)(l,{key:0,onClick:t[0]||(t[0]=a=>e.menuToggle())},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(j.M0b))])),_:1})):(0,r.kq)("",!0),e.collapseMenu?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(l,{key:1,onClick:t[1]||(t[1]=a=>e.menuToggle())},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(j.qFw))])),_:1}))])),_:1}),de,me,(0,r.Wm)(n,{index:"/"},{title:(0,r.w5)((()=>[(0,r.Uk)("Dashboard")])),default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(j.Drq))])),_:1})])),_:1}),(0,r.Wm)(n,{index:"/activity"},{title:(0,r.w5)((()=>[(0,r.Uk)("Attività")])),default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(j.faS))])),_:1})])),_:1}),(0,r.Wm)(n,{index:"/sells"},{title:(0,r.w5)((()=>[(0,r.Uk)("Vendite")])),default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(j.UhZ))])),_:1})])),_:1}),(0,o.SU)(p).state.user.abilities.includes("system:admin")?((0,r.wg)(),(0,r.j4)(n,{key:0,index:"/quote"},{title:(0,r.w5)((()=>[(0,r.Uk)("Dividendi")])),default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(j.WIg))])),_:1})])),_:1})):(0,r.kq)("",!0),(0,o.SU)(p).state.user.abilities.includes("numie:developer")?((0,r.wg)(),(0,r.j4)(n,{key:1,index:"/logs"},{title:(0,r.w5)((()=>[(0,r.Uk)("System Log")])),default:(0,r.w5)((()=>[(0,r.Wm)(l,null,{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(j.xLm))])),_:1})])),_:1})):(0,r.kq)("",!0)])),_:1},8,["default-active","collapse"])}}};const pe=ce;var we=pe,ve={__name:"Main",setup(e){return(0,r.aZ)({name:"MainComponent"}),(e,a)=>{const t=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(t)}}};const fe=ve;var ge=fe;const be=(0,r._)("p",null,"@2024 - Numieport by Numìe",-1),_e=[be];var he={__name:"Footer",setup(e){return(0,r.aZ)({name:"FooterComponent"}),(e,a)=>((0,r.wg)(),(0,r.iD)("footer",null,_e))}};const ye=he;var ke=ye,We=(t(560),t(2483));const xe={class:"center-container"},De=(0,r._)("div",{class:"card-header"},[(0,r._)("span",null,"Accedi")],-1),Ue=(0,r._)("div",{class:"grid-content ep-bg-purple"},null,-1),Se=(0,r._)("div",{class:"grid-content ep-bg-purple-light"},null,-1),je=(0,r._)("div",{class:"grid-content ep-bg-purple"},null,-1);var Ce={__name:"Login",setup(e){const a=(0,We.tv)(),t=(0,o.iH)([]),l=(0,o.iH)([]),n=(0,o.iH)(!1),i=(0,o.iH)({}),u={username:[{required:!0,message:"Campo richiesto",trigger:"blur"}],password:[{required:!0,message:"Campo richiesto",trigger:"blur"}]},s={submit:(e,a)=>{d(e,a)},disabled:!1,fields:[{row:[{type:"input",label:"Username",name:"username",placeholder:"Username",prepend:{icon:"user-filled"},space:24}]},{row:[{type:"password",label:"Password",name:"password",placeholder:"Password",space:24,prepend:{icon:"key"}}]}]},d=async(e,t)=>{i.value={};const l=await t.validate((e=>e));if(!l)return!1;n.value=!0;let r=await b("token",e);r&&(r.errors?i.value=r.errors:a.push("/")),n.value=!1};return(0,r.aZ)({name:"LoginView"}),(e,a)=>{const o=(0,r.up)("el-card"),d=(0,r.up)("el-col"),m=(0,r.up)("el-row");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",xe,[(0,r.Wm)(o,{class:"centered-card"},{header:(0,r.w5)((()=>[De])),default:(0,r.w5)((()=>[(0,r.Wm)(F,{formModel:s,formData:t.value,action:l.value,formLoading:n.value,rules:u,errors:i.value},null,8,["formData","action","formLoading","errors"])])),_:1})]),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{span:8},{default:(0,r.w5)((()=>[Ue])),_:1}),(0,r.Wm)(d,{span:8},{default:(0,r.w5)((()=>[Se])),_:1}),(0,r.Wm)(d,{span:8},{default:(0,r.w5)((()=>[je])),_:1})])),_:1})],64)}}};const qe=Ce;var He=qe,ze={__name:"App",setup(e){const a=(0,o.iH)(!0),t=(0,o.iH)("start-menu");function l(){a.value=!a.value,t.value=a.value?"close-menu":"open-menu"}return(e,o)=>{const i=(0,r.up)("el-aside"),u=(0,r.up)("el-header"),s=(0,r.up)("el-main"),d=(0,r.up)("el-container"),m=(0,r.up)("el-footer");return(0,r.wg)(),(0,r.iD)(r.HY,null,[e.$store.state.logged?((0,r.wg)(),(0,r.j4)(d,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{class:(0,n.C_)(t.value)},{default:(0,r.w5)((()=>[(0,r.Wm)(we,{collapseMenu:a.value,menuToggle:l},null,8,["collapseMenu"])])),_:1},8,["class"]),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(se,{menuToggle:l})])),_:1}),(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r.Wm)(ge)])),_:1})])),_:1})])),_:1})):(0,r.kq)("",!0),e.$store.state.logged?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(d,{key:1},{default:(0,r.w5)((()=>[(0,r.Wm)(He)])),_:1})),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(ke)])),_:1})],64)}}};const Ve=ze;var Me=Ve,Ye=t(5704),Ie=t(7560),Ae=(t(6747),t(4415),t(6367)),Ne=t(8271),Te=t(1907),Oe=t(6186),Fe=t(3083),Le=t(7685),Pe=t(9867),Ze=t(8043),Ee=t(8482),Re=t(3215);const Be=e=>((0,r.dD)("data-v-22c87200"),e=e(),(0,r.Cn)(),e),Qe=Be((()=>(0,r._)("h3",null,"Dashboard",-1))),Ke={class:"statistic-card"},$e={class:"statistic-card"},Xe=Be((()=>(0,r._)("div",{style:{display:"inline-flex","align-items":"center"}}," Ore totali di attività ",-1))),Ge={class:"statistic-card"},Je={class:"statistic-card"},ea=Be((()=>(0,r._)("div",{style:{display:"inline-flex","align-items":"center"}}," Importo totale di vendite ",-1))),aa=Be((()=>(0,r._)("br",null,null,-1))),ta=Be((()=>(0,r._)("br",null,null,-1))),la=Be((()=>(0,r._)("br",null,null,-1))),ra=Be((()=>(0,r._)("br",null,null,-1))),na=Be((()=>(0,r._)("br",null,null,-1))),oa=Be((()=>(0,r._)("br",null,null,-1))),ia=Be((()=>(0,r._)("br",null,null,-1))),ua=Be((()=>(0,r._)("br",null,null,-1))),sa=Be((()=>(0,r._)("br",null,null,-1))),da=Be((()=>(0,r._)("b",null,"Ultime attività",-1))),ma=Be((()=>(0,r._)("br",null,null,-1))),ca=Be((()=>(0,r._)("br",null,null,-1))),pa=Be((()=>(0,r._)("br",null,null,-1))),wa=Be((()=>(0,r._)("b",null,"Ultime vendite",-1))),va=Be((()=>(0,r._)("br",null,null,-1))),fa=Be((()=>(0,r._)("br",null,null,-1)));var ga={__name:"Dashboard",setup(e){(0,Ne.D)([Fe.N,Le.N,Pe.N,Te.N,Ee.N,Oe.N,Ze.N]);const a=(0,o.iH)(!1),t=(0,o.iH)(),l=(0,o.iH)(0),i=(0,o.iH)(0),u=(0,o.iH)(0),s=(0,o.iH)(0),d=(0,Ae.Yzy)(l,{duration:1500}),m=(0,Ae.Yzy)(i,{duration:1500}),c=(0,Ae.Yzy)(u,{duration:1500}),w=(0,Ae.Yzy)(s,{duration:1500}),v=(0,o.iH)(null),f=(0,o.iH)(null),g=(0,o.iH)(null),b=(0,o.iH)(null),_=(0,o.iH)(null),h=(0,o.iH)({}),k=({rowIndex:e})=>0==e?"success-row":"",W=e=>{const a=new Date(e.data_ora?e.data_ora:e.data),t={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1};return a.toLocaleString("it-IT",t)},x=e=>{const a=new Date(e.data_ora?e.data_ora:e.data),t={year:"numeric",month:"2-digit",day:"2-digit"};return a.toLocaleString("it-IT",t)},D=e=>{let a=e.descrizione,t=48;return a.length>t?a.slice(0,t)+"...":a},U=e=>{let a=e.importo;return null!==a?new Intl.NumberFormat("it-IT",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a):a};return(0,r.bv)((async()=>{a.value=!0;const e=await y("user/dashboard");t.value=e,l.value=e.acts.total.count,i.value=e.acts.total.hours,u.value=e.sells.total.count,s.value=e.sells.total.amount,_.value={title:{text:"Spazio utilizzato: "+U({importo:e.disk_usage.total})+" bytes",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},color:["#b3e19d","#f89898"],series:[{name:"Spazio",type:"pie",radius:"64%",center:["50%","60%"],data:[{value:e.disk_usage.usage,name:"Spazio utile"},{value:e.disk_usage.orphan,name:"Spazio orfano"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},v.value={title:{text:"Numero attività",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},series:[{name:"Spazio",type:"pie",radius:"64%",center:["50%","60%"],data:e.acts.users.map((e=>({value:e.stats.count,name:e.subject}))),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},f.value={title:{text:"Ore attività",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},series:[{name:"Spazio",type:"pie",radius:"64%",center:["50%","60%"],data:e.acts.users.map((e=>({value:e.stats.hours,name:e.subject}))),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},g.value={title:{text:"Numero vendite",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},series:[{name:"Spazio",type:"pie",radius:"64%",center:["50%","60%"],data:e.sells.users.map((e=>({value:e.stats.count,name:e.subject}))),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},b.value={title:{text:"Importo vendite",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},series:[{name:"Spazio",type:"pie",radius:"64%",center:["50%","60%"],data:e.sells.users.map((e=>({value:e.stats.amount,name:e.subject}))),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},h.value=e.last_stats,a.value=!1})),(0,r.aZ)({name:"DashboardView"}),(e,a)=>{const t=(0,r.up)("el-statistic"),l=(0,r.up)("el-col"),i=(0,r.up)("el-row"),u=(0,r.up)("el-card"),s=(0,r.up)("el-alert"),y=(0,r.up)("el-text"),S=(0,r.up)("el-table-column"),j=(0,r.up)("el-table");return(0,r.wg)(),(0,r.iD)(r.HY,null,[Qe,(0,r.Wm)(i,{gutter:16},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{span:6},{default:(0,r.w5)((()=>[(0,r._)("div",Ke,[(0,r.Wm)(t,{title:"Numero totale di attività",value:(0,o.SU)(d)},null,8,["value"])])])),_:1}),(0,r.Wm)(l,{span:6},{default:(0,r.w5)((()=>[(0,r._)("div",$e,[(0,r.Wm)(t,{value:(0,o.SU)(m)},{title:(0,r.w5)((()=>[Xe])),suffix:(0,r.w5)((()=>[(0,r.Uk)(" ore")])),_:1},8,["value"])])])),_:1}),(0,r.Wm)(l,{span:6},{default:(0,r.w5)((()=>[(0,r._)("div",Ge,[(0,r.Wm)(t,{title:"Numero totale di vendite",value:(0,o.SU)(c)},null,8,["value"])])])),_:1}),(0,r.Wm)(l,{span:6},{default:(0,r.w5)((()=>[(0,r._)("div",Je,[(0,r.Wm)(t,{value:(0,o.SU)(w)},{title:(0,r.w5)((()=>[ea])),suffix:(0,r.w5)((()=>[(0,r.Uk)("€")])),_:1},8,["value"])])])),_:1})])),_:1}),aa,ta,la,(0,r.Wm)(i,{gutter:16},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{span:6},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"box-card"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(Re.ZP),{option:v.value,style:{height:"232px"},autoresize:""},null,8,["option"])])),_:1})])),_:1}),(0,r.Wm)(l,{span:6},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"box-card"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(Re.ZP),{option:f.value,style:{height:"232px"},autoresize:""},null,8,["option"])])),_:1})])),_:1}),(0,r.Wm)(l,{span:6},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"box-card"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(Re.ZP),{option:g.value,style:{height:"232px"},autoresize:""},null,8,["option"])])),_:1})])),_:1}),(0,r.Wm)(l,{span:6},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"box-card"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(Re.ZP),{option:b.value,style:{height:"232px"},autoresize:""},null,8,["option"])])),_:1})])),_:1})])),_:1}),ra,(0,r.Wm)(i,{gutter:16},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{span:18},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"box-card",style:{height:"350px"}},{default:(0,r.w5)((()=>[(0,r._)("b",null,"Benvenuto "+(0,n.zw)((0,o.SU)(p).state.user.name)+" "+(0,n.zw)((0,o.SU)(p).state.user.surname),1),na,oa,1!=(0,o.SU)(p).state.user.password_changed?((0,r.wg)(),(0,r.j4)(s,{key:0,title:"La tua password è ancora quella di default. Si invita a cambiarla prima possibile.",type:"error"})):(0,r.kq)("",!0),ia,ua,(0,r.Wm)(i,{type:"flex",justify:"center",gutter:20},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.value,(e=>((0,r.wg)(),(0,r.j4)(l,{key:e.id+"_last_login",span:8},{default:(0,r.w5)((()=>[(0,o.SU)(p).state.user.id==e.id?((0,r.wg)(),(0,r.j4)(y,{key:0,class:"mx-1",type:"success"},{default:(0,r.w5)((()=>[(0,r.Uk)("Ultimi accessi: "+(0,n.zw)(e.subject),1)])),_:2},1024)):(0,r.kq)("",!0),(0,o.SU)(p).state.user.id!=e.id?((0,r.wg)(),(0,r.j4)(y,{key:1,class:"mx-1",type:"warning"},{default:(0,r.w5)((()=>[(0,r.Uk)("Ultimi accessi: "+(0,n.zw)(e.subject),1)])),_:2},1024)):(0,r.kq)("",!0),(0,r.Wm)(j,{data:e.last_logins,"row-class-name":k},{default:(0,r.w5)((()=>[(0,r.Wm)(S,{prop:"data_ora",label:"Data",formatter:W}),(0,r.Wm)(S,{prop:"so",label:"S.O."}),(0,r.Wm)(S,{prop:"browser",label:"Browser"})])),_:2},1032,["data"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),(0,r.Wm)(l,{span:6},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{class:"box-card"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(Re.ZP),{option:_.value,style:{height:"310px"}},null,8,["option"])])),_:1})])),_:1})])),_:1}),sa,(0,r.Wm)(u,{class:"box-card"},{default:(0,r.w5)((()=>[da,ma,ca,(0,r.Wm)(i,{type:"flex",justify:"center",gutter:20},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.value,(e=>((0,r.wg)(),(0,r.j4)(l,{key:e.id+"_last_acts",span:8},{default:(0,r.w5)((()=>[(0,o.SU)(p).state.user.id==e.id?((0,r.wg)(),(0,r.j4)(y,{key:0,class:"mx-1",type:"success"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(e.subject),1)])),_:2},1024)):(0,r.kq)("",!0),(0,o.SU)(p).state.user.id!=e.id?((0,r.wg)(),(0,r.j4)(y,{key:1,class:"mx-1",type:"warning"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(e.subject),1)])),_:2},1024)):(0,r.kq)("",!0),(0,r.Wm)(j,{data:e.last_acts,"row-class-name":k},{default:(0,r.w5)((()=>[(0,r.Wm)(S,{prop:"data",label:"Data",formatter:x}),(0,r.Wm)(S,{prop:"descrizione",label:"Descrizione",formatter:D,width:"320"}),(0,r.Wm)(S,{prop:"ore",label:"Ore",align:"right"})])),_:2},1032,["data"])])),_:2},1024)))),128))])),_:1})])),_:1}),pa,(0,r.Wm)(u,{class:"box-card"},{default:(0,r.w5)((()=>[wa,va,fa,(0,r.Wm)(i,{type:"flex",justify:"center",gutter:20},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.value,(e=>((0,r.wg)(),(0,r.j4)(l,{key:e.id+"_last_sells",span:8},{default:(0,r.w5)((()=>[(0,o.SU)(p).state.user.id==e.id?((0,r.wg)(),(0,r.j4)(y,{key:0,class:"mx-1",type:"success"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(e.subject),1)])),_:2},1024)):(0,r.kq)("",!0),(0,o.SU)(p).state.user.id!=e.id?((0,r.wg)(),(0,r.j4)(y,{key:1,class:"mx-1",type:"warning"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(e.subject),1)])),_:2},1024)):(0,r.kq)("",!0),(0,r.Wm)(j,{data:e.last_sells,"row-class-name":k},{default:(0,r.w5)((()=>[(0,r.Wm)(S,{prop:"data",label:"Data",formatter:x}),(0,r.Wm)(S,{prop:"descrizione",label:"Descrizione",formatter:D,width:"320"}),(0,r.Wm)(S,{prop:"importo",label:"Importo €",formatter:U,align:"right"})])),_:2},1032,["data"])])),_:2},1024)))),128))])),_:1})])),_:1})],64)}}},ba=t(89);const _a=(0,ba.Z)(ga,[["__scopeId","data-v-22c87200"]]);var ha=_a;const ya=(0,r._)("br",null,null,-1),ka={key:0},Wa={style:{padding:"16px 0 16px 0"}};var xa={__name:"Table",props:{details:{},entity:{},endpoints:{},external_row:[],header:{},attachments:{},actions:{},form:{},rules:{},tableRowClassName:{},tableCellClassName:{},tableCellStyle:{},showSummary:{}},setup(e){const a=e,t=(0,o.iH)(a.form),l=(0,o.iH)(!1),i=(0,o.iH)(""),u=(0,o.iH)(!0),s=(0,o.iH)(!1),d=(0,o.iH)([]),m=(0,o.iH)(""),c=(0,o.iH)([]),p=(0,o.iH)({}),w=(0,o.iH)(!1),v=(0,o.iH)([]),f=e=>{m.value=e},g=(0,r.Fl)((()=>d.value.filter((e=>{for(const t of a.header)if(String(e[t.field]).toLowerCase().includes(m.value.toLowerCase()))return!0;return!1})))),b=(e,t)=>{const l=a.header[t.rawColumnKey],r=l.format,n=e[l.field];if("data"==r||"datatime"==r){const e=new Date(n),a="data"==r?{year:"numeric",month:"2-digit",day:"2-digit"}:{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1};return n?e.toLocaleString("it-IT",a):""}return"decimal"==r&&null!==n?new Intl.NumberFormat("it-IT",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n):n};function _(){a.actions.create.action?a.actions.create.action():q()}function k(e,t){a.actions.read.action?a.actions.read.action(e,t):H(e,t)}function S(e,t){a.actions.update.action?a.actions.update.action(e,t):z(e,t)}function C(e,t){a.actions.delete.action?a.actions.delete.action(e,t):V(e,t)}const q=async()=>{p.value="create",t.value.disabled=!1,c.value={},i.value="Aggiungi "+a.entity,l.value=!0},H=async(e,r)=>{p.value="read",t.value.disabled=!0,c.value={},i.value="Dettagli "+a.entity,l.value=!0,"server-side"==a.details?(w.value=!0,c.value=await x(a.endpoints.read,r.id),w.value=!1):c.value={...d.value.find((e=>e.id==r.id))}},z=async(e,r)=>{p.value="update",t.value.disabled=!1,c.value={},i.value="Modifica "+a.entity,l.value=!0,"server-side"==a.details?(w.value=!0,c.value=await x(a.endpoints.read,r.id),w.value=!1):c.value={...d.value.find((e=>e.id==r.id))}},V=async(e,t)=>{p.value="delete",u.value=!0;let l=await U(a.endpoints.delete,t.id);l&&(d.value=d.value.filter((e=>e.id!==t.id))),u.value=!1},M=async(e,t)=>{const r=await t.validate((e=>e));if(!r)return!1;if(w.value=!0,"create"==p.value){let t=await W(a.endpoints.create,e);t?t.errors?v.value=t.errors:(d.value.push(t),l.value=!1):console.log("create resp KO: ",t)}if("update"==p.value){let t=await D(a.endpoints.create,e);t?t.errors?v.value=t.errors:(d.value=d.value.map((e=>e.id==t.id?t:e)),l.value=!1):console.log("create resp KO: ",t)}w.value=!1},Y=async e=>{s.value=!0,await h(e),s.value=!1};return(0,r.bv)((async()=>{d.value=a.endpoints&&a.endpoints.list?await y(a.endpoints.list):a.external_row,u.value=!1,t.value.submit=a.form&&a.form.submit?a.form.submit:M})),(0,r.ic)((()=>{a.external_row&&(d.value=a.external_row)})),(0,r.aZ)({name:"TableEl"}),(a,d)=>{const h=(0,r.up)("el-button"),y=(0,r.up)("el-col"),W=(0,r.up)("el-input"),x=(0,r.up)("el-row"),D=(0,r.up)("el-table-column"),U=(0,r.up)("el-icon"),q=(0,r.up)("el-tooltip"),H=(0,r.up)("el-popconfirm"),z=(0,r.up)("el-table"),V=(0,r.up)("el-drawer"),M=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(x,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y,{span:4},{default:(0,r.w5)((()=>[e.actions&&e.actions.create?((0,r.wg)(),(0,r.j4)(h,{key:0,type:"success",icon:(0,o.SU)(j.v37),onClick:d[0]||(d[0]=e=>_()),disabled:!!e.actions.create.disabled&&e.actions.create.disabled()},{default:(0,r.w5)((()=>[(0,r.Uk)("Aggiungi")])),_:1},8,["icon","disabled"])):(0,r.kq)("",!0)])),_:1}),(0,r.Wm)(y,{span:4}),(0,r.Wm)(y,{span:4}),(0,r.Wm)(y,{span:4}),(0,r.Wm)(y,{span:4}),(0,r.Wm)(y,{span:4},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{modelValue:m.value,"onUpdate:modelValue":d[1]||(d[1]=e=>m.value=e),placeholder:"Cerca...",onInput:f},null,8,["modelValue"])])),_:1})])),_:1}),ya,(0,r.wy)(((0,r.wg)(),(0,r.j4)(z,{data:g.value,style:{width:"100%"},height:"400","empty-text":"Nessun risultato trovato","row-class-name":e.tableRowClassName,"cell-class-name":e.tableCellClassName,"cell-style":e.tableCellStyle,"show-summary":e.showSummary},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.header,((e,a)=>((0,r.wg)(),(0,r.j4)(D,{sortable:e.sortable,formatter:b,key:a,prop:e.field,label:e.label,align:e.align?e.align:"center",width:e.width?e.width:""},null,8,["sortable","prop","label","align","width"])))),128)),e.attachments&&e.attachments.field?((0,r.wg)(),(0,r.j4)(D,{key:0,label:e.attachments.label,width:e.attachments.width?e.attachments.width:""},{default:(0,r.w5)((a=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.row[e.attachments.field],((e,a)=>((0,r.wg)(),(0,r.iD)("div",{key:a},[(0,r.Wm)(h,{type:"primary",loading:s.value,text:"",onClick:a=>Y(e)},{default:(0,r.w5)((()=>[s.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(U,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(j.UWx))])),_:1})),(0,r.Uk)(" "+(0,n.zw)(e.name),1)])),_:2},1032,["loading","onClick"])])))),128)),0==a.row[e.attachments.field].length?((0,r.wg)(),(0,r.iD)("div",ka,[(0,r._)("i",null,(0,n.zw)(e.attachments.no_data),1)])):(0,r.kq)("",!0)])),_:1},8,["label","width"])):(0,r.kq)("",!0),p.value&&(p.value.read||p.value.update||p.value.delete)?((0,r.wg)(),(0,r.j4)(D,{key:1,align:"right"},{default:(0,r.w5)((a=>[(0,r.Wm)(q,{class:"box-item",effect:"dark",content:"Dettagli",placement:"top-start"},{default:(0,r.w5)((()=>[e.actions&&e.actions.read?((0,r.wg)(),(0,r.j4)(h,{key:0,type:"primary",icon:(0,o.SU)(j.olm),circle:"",onClick:e=>k(a.$index,a.row),disabled:!!e.actions.read.disabled&&e.actions.read.disabled(a.$index,a.row)},null,8,["icon","onClick","disabled"])):(0,r.kq)("",!0)])),_:2},1024),(0,r.Wm)(q,{class:"box-item",effect:"dark",content:"Modifica",placement:"top-start"},{default:(0,r.w5)((()=>[e.actions&&e.actions.update?((0,r.wg)(),(0,r.j4)(h,{key:0,type:"warning",icon:(0,o.SU)(j.I8b),circle:"",onClick:e=>S(a.$index,a.row),disabled:!!e.actions.update.disabled&&e.actions.update.disabled(a.$index,a.row)},null,8,["icon","onClick","disabled"])):(0,r.kq)("",!0)])),_:2},1024),(0,r.Wm)(H,{title:"Procedere con la cancellazione?",onConfirm:e=>C(a.$index,a.row),"confirm-button-text":"Si"},{reference:(0,r.w5)((()=>[e.actions&&e.actions.delete?((0,r.wg)(),(0,r.j4)(h,{key:0,type:"danger",icon:(0,o.SU)(j.HG3),circle:"",disabled:!!e.actions.delete.disabled&&e.actions.delete.disabled(a.$index,a.row)},null,8,["icon","disabled"])):(0,r.kq)("",!0)])),_:2},1032,["onConfirm"])])),_:1})):(0,r.kq)("",!0)])),_:1},8,["data","row-class-name","cell-class-name","cell-style","show-summary"])),[[M,u.value]]),(0,r._)("div",Wa,"Risultati: "+(0,n.zw)(g.value.length),1),(0,r.Wm)(V,{modelValue:l.value,"onUpdate:modelValue":d[2]||(d[2]=e=>l.value=e),title:i.value,direction:"rtl",size:"50%"},{default:(0,r.w5)((()=>[(0,r.Wm)(F,{formModel:t.value,formData:c.value,action:p.value,formLoading:w.value,rules:e.rules,errors:v.value},null,8,["formModel","formData","action","formLoading","rules","errors"])])),_:1},8,["modelValue","title"])],64)}}};const Da=xa;var Ua=Da;const Sa=e=>((0,r.dD)("data-v-5ac8609e"),e=e(),(0,r.Cn)(),e),ja=Sa((()=>(0,r._)("h3",null,"Attività",-1))),Ca={class:"act-date-picker"},qa=Sa((()=>(0,r._)("br",null,null,-1))),Ha=Sa((()=>(0,r._)("br",null,null,-1)));var za={__name:"Activity",setup(e){const a=(0,o.iH)(p.state.user.id),t=(0,o.iH)(!0),l=(0,o.iH)([]),n=(0,o.iH)(p.state.data_filter?p.state.data_filter:[(new Date).getFullYear()+"-"+((new Date).getMonth()+1).toString().padStart(2,"0"),(new Date).getFullYear()+"-"+((new Date).getMonth()+1).toString().padStart(2,"0")]),i=[{text:"Mese corrente",value:[new Date,new Date]},{text:"Ultimi 3 mesi",value:()=>{const e=new Date,a=new Date;return a.setMonth(a.getMonth()-3),[a,e]}},{text:"Ultimi 6 mesi",value:()=>{const e=new Date,a=new Date;return a.setMonth(a.getMonth()-6),[a,e]}},{text:"Ultimo anno",value:()=>{const e=new Date,a=new Date;return a.setMonth(a.getMonth()-12),[a,e]}}],u=(e,a)=>{console.log(e,a)},s=e=>{p.commit("setDataFilter",n.value),d(e[0],e[1])},d=async(e,a)=>{t.value=!0;let r=await k("user/acts",{from:e,to:a});r&&!r.errors&&(l.value=r),t.value=!1};return(0,r.bv)((async()=>{d(n.value[0],n.value[1])})),(0,r.Ah)((()=>{})),(0,r.aZ)({name:"ActivityView"}),(e,d)=>{const m=(0,r.up)("el-date-picker"),c=(0,r.up)("el-tab-pane"),w=(0,r.up)("el-tabs"),v=(0,r.up)("el-card"),f=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)(r.HY,null,[ja,(0,r.Wm)(v,{class:"box-card"},{default:(0,r.w5)((()=>[(0,r._)("div",Ca,[(0,r.Wm)(m,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=e=>n.value=e),type:"monthrange","unlink-panels":"","range-separator":"A","start-placeholder":"Dal mese","end-placeholder":"Al mese",shortcuts:i,format:"MMMM YYYY","value-format":"YYYY-MM",onChange:s},null,8,["modelValue"])]),qa,Ha,(0,r.wy)(((0,r.wg)(),(0,r.j4)(w,{modelValue:a.value,"onUpdate:modelValue":d[1]||(d[1]=e=>a.value=e),class:"act-tabs",onTabClick:u,type:"border-card"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.value,((e,a)=>((0,r.wg)(),(0,r.j4)(c,{label:e.subject,key:a,name:e.id},{default:(0,r.w5)((()=>[(0,r.Wm)(Ua,{showSummary:"",entity:"Attività",header:[{field:"id",label:"#ID",align:"right",sortable:!0,width:128},{field:"data",label:"Data attività",format:"data",sortable:!0},{field:"ore",label:"Ore impiegate",format:"numeric",align:"right"},{field:"descrizione",label:"Descrizione attività",width:1024}],external_row:e.activities,actions:{...(0,o.SU)(p).state.user.id==e.id?{create:{}}:{}},form:{fields:[{row:[{type:"datapicker",label:"Data attività",name:"data",space:12},{type:"input-numeric",min:1,max:24,label:"Ore impiegate",name:"ore",space:12,controlsPosition:"right"}]},{row:[{type:"text",label:"Descrizione dell'attività",name:"descrizione",space:24}]},{row:[{type:"alert-warning",text:"Attenzione! Dopo il salvataggio non sarà più possibile modificare o cancellare l'attività inserita. Verifica i dati prima di procedere.",space:24}]}]},rules:{data:[{required:!0,message:"Campo richiesto",trigger:"blur"},{type:"date",message:"Inserire una data valida",trigger:["blur","change"]}],ore:[{required:!0,message:"Campo richiesto",trigger:"blur"},{type:"number",message:"Inserire valore intero",trigger:["blur","change"]}],descrizione:[{required:!0,message:"Campo richiesto",trigger:"blur"},{type:"string",message:"Inserire un testo valido",trigger:["blur","change"]}]},endpoints:{create:"user/act"},tableCellStyle:({row:e,column:a,rowIndex:t,columnIndex:l})=>(console.log(e,a,t,l),0==l||2==l?{"text-align":"right"}:1==l?{"text-align":"center"}:{"text-align":"left"})},null,8,["external_row","actions","form","tableCellStyle"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])),[[f,t.value]])])),_:1})],64)}}};const Va=(0,ba.Z)(za,[["__scopeId","data-v-5ac8609e"]]);var Ma=Va;const Ya=e=>((0,r.dD)("data-v-10ee9fbf"),e=e(),(0,r.Cn)(),e),Ia=Ya((()=>(0,r._)("h3",null,"Vendite",-1))),Aa={class:"sell-date-picker"},Na=Ya((()=>(0,r._)("br",null,null,-1))),Ta=Ya((()=>(0,r._)("br",null,null,-1)));var Oa={__name:"Sell",setup(e){const a=(0,o.iH)(p.state.user.id),t=(0,o.iH)(!0),l=(0,o.iH)([]),n=(0,o.iH)(p.state.data_filter?p.state.data_filter:[(new Date).getFullYear()+"-"+((new Date).getMonth()+1).toString().padStart(2,"0"),(new Date).getFullYear()+"-"+((new Date).getMonth()+1).toString().padStart(2,"0")]),i=[{text:"Mese corrente",value:[new Date,new Date]},{text:"Ultimi 3 mesi",value:()=>{const e=new Date,a=new Date;return a.setMonth(a.getMonth()-3),[a,e]}},{text:"Ultimi 6 mesi",value:()=>{const e=new Date,a=new Date;return a.setMonth(a.getMonth()-6),[a,e]}},{text:"Ultimo anno",value:()=>{const e=new Date,a=new Date;return a.setMonth(a.getMonth()-12),[a,e]}}],u=(e,a)=>{console.log(e,a)},s=e=>{p.commit("setDataFilter",n.value),d(e[0],e[1])},d=async(e,r)=>{t.value=!0;let n=await k("user/sells",{from:e,to:r});n&&!n.errors&&(l.value=n,p.state.user.abilities.includes("numie:developer")&&(a.value=n[0].id)),t.value=!1};return(0,r.bv)((async()=>{d(n.value[0],n.value[1])})),(0,r.Ah)((()=>{})),(0,r.aZ)({name:"SellView"}),(e,d)=>{const m=(0,r.up)("el-date-picker"),c=(0,r.up)("el-tab-pane"),w=(0,r.up)("el-tabs"),v=(0,r.up)("el-card"),f=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)(r.HY,null,[Ia,(0,r.Wm)(v,{class:"box-card"},{default:(0,r.w5)((()=>[(0,r._)("div",Aa,[(0,r.Wm)(m,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=e=>n.value=e),type:"monthrange","unlink-panels":"","range-separator":"A","start-placeholder":"Dal mese","end-placeholder":"Al mese",shortcuts:i,format:"MMMM YYYY","value-format":"YYYY-MM",onChange:s},null,8,["modelValue"])]),Na,Ta,(0,r.wy)(((0,r.wg)(),(0,r.j4)(w,{modelValue:a.value,"onUpdate:modelValue":d[1]||(d[1]=e=>a.value=e),class:"sell-tabs",onTabClick:u,type:"border-card"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.value,((e,a)=>((0,r.wg)(),(0,r.j4)(c,{label:e.subject,key:a,name:e.id},{default:(0,r.w5)((()=>[(0,r.Wm)(Ua,{showSummary:"true",entity:"Vendita",header:[{field:"id",label:"#ID",align:"right",sortable:!0,width:128},{field:"data",label:"Data vendita",format:"data",sortable:!0},{field:"importo",label:"Importo €",format:"decimal",align:"right"},{field:"descrizione",label:"Descrizione vendita",width:728}],attachments:{field:"documents",label:"Allegati",width:412,no_data:"Nessun allegato"},external_row:e.sells,actions:{...(0,o.SU)(p).state.user.id==e.id?{create:{}}:{}},form:{fields:[{row:[{type:"alert-info",text:"Inserire una vendita solo se è stata liquidata.",space:24}]},{row:[{type:"datapicker",label:"Data vendita",name:"data",space:12},{type:"input-decimal",label:"Importo",name:"importo",space:12}]},{row:[{type:"text",label:"Descrizione vendita",name:"descrizione",space:24}]},{row:[{type:"upload",label:"Allegati",name:"allegati",space:24,limit:3,uploadEndpoint:"/document/upload",removeEndpoint:"/document/remove",maxmbsize:2,accept:{label:"pdf",mime:"application/pdf"}}]},{row:[{type:"alert-warning",text:"Attenzione! Dopo il salvataggio non sarà più possibile modificare o cancellare la vendita inserita. Verifica i dati prima di procedere.",space:24}]}]},rules:{data:[{required:!0,message:"Campo richiesto",trigger:"blur"},{type:"date",message:"Inserire una data valida",trigger:["blur","change"]}],importo:[{required:!0,message:"Campo richiesto",trigger:"blur"},{}],file:[{required:!0,message:"Campo richiesto",trigger:"blur"},{}],descrizione:[{required:!0,message:"Campo richiesto",trigger:"blur"},{type:"string",message:"Inserire un testo valido",trigger:["blur","change"]}]},endpoints:{create:"user/sell"},tableCellStyle:({row:e,column:a,rowIndex:t,columnIndex:l})=>(console.log(e,a,t,l),0==l||2==l?{"text-align":"right"}:1==l?{"text-align":"center"}:{"text-align":"left"})},null,8,["external_row","actions","form","tableCellStyle"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])),[[f,t.value]])])),_:1})],64)}}};const Fa=(0,ba.Z)(Oa,[["__scopeId","data-v-10ee9fbf"]]);var La=Fa;const Pa=(0,r._)("h3",null,"Dividendi",-1),Za=(0,r._)("br",null,null,-1),Ea=(0,r._)("br",null,null,-1),Ra=(0,r._)("br",null,null,-1),Ba=(0,r._)("br",null,null,-1),Qa=(0,r._)("div",{class:"card-header"},[(0,r._)("span",null,[(0,r._)("b",null,"Dividendi per vendite")])],-1),Ka=(0,r._)("br",null,null,-1),$a=(0,r._)("div",{class:"card-header"},[(0,r._)("span",null,[(0,r._)("b",null,"Dividendi per Attività")])],-1),Xa=(0,r._)("br",null,null,-1),Ga=(0,r._)("div",{class:"card-header"},[(0,r._)("span",null,[(0,r._)("b",null,"Quadro di sintesi")])],-1),Ja=(0,r._)("br",null,null,-1),et=(0,r._)("br",null,null,-1),at=(0,r._)("br",null,null,-1),tt=(0,r._)("br",null,null,-1),lt=(0,r._)("br",null,null,-1);var rt={__name:"Quote",setup(e){(0,Ne.D)([Fe.N,Le.N,Pe.N,Te.N,Ee.N,Oe.N,Ze.N]);const a=(0,o.iH)([]),t=(0,o.iH)("current"),l=(0,o.iH)(!1),i=(0,o.iH)([]),u=(0,o.iH)({}),s=(0,o.iH)(!1),d=(0,o.iH)([]),m=(0,o.iH)(null),c=(0,o.iH)(null),w=(0,r.Fl)((()=>{let e=0;return i.value.forEach((a=>{e+=a.sell_amount})),e})),v=(0,r.Fl)((()=>{let e=0;return i.value.forEach((a=>{e+=a.acts_amount})),e})),f=(0,r.Fl)((()=>{let e=0;return i.value.forEach((a=>{e+=a.acts_amount+a.sell_amount})),e})),g=(0,r.Fl)((()=>u.value.amount-w.value)),b=(0,r.Fl)((()=>g.value-v.value)),_=e=>{e.sell_amount=e.amount*e.sell_perc/100,e.acts_amount=g.value*e.acts_perc/100},h=e=>{e.acts_amount=g.value*e.acts_perc/100},x=(e,a)=>{let t=e[a.property];return"developer"==e.role&&"amount"==a.property?"-":null!==t?new Intl.NumberFormat("it-IT",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t):t},D=(e,a)=>(0,r.h)("strong",{},e[a.property]),U=(e,a)=>{const t=new Date(e[a.property]),l={year:"numeric",month:"2-digit",day:"2-digit"};return t.toLocaleString("it-IT",l)},S=({row:e,rowIndex:a})=>2==a&&e.amount<0?"danger-row":2==a?"success-row":void 0,j=async()=>{s.value=!0;const e={quote:{data_value:a.value,totals:{amount:u.value.amount,amount_sell:w.value,amount_acts:v.value,amount_cash:b.value}},details:i.value.map((e=>({id:e.id,acts_amount:e.acts_amount,acts_perc:e.acts_perc,sell_amount:e.sell_amount,sell_perc:e.sell_perc})))};let t=await W("admin/quote",e);t&&(window.scrollTo({top:0,behavior:"smooth"}),a.value=await y("admin/quote/period"),p.commit("setDataFilterQuote",a.value),q(a.value[0],a.value[1]),d.value=await y("admin/quotes")),s.value=!1},C=()=>{p.commit("setDataFilterQuote",a.value),q(a.value[0],a.value[1])},q=async(e,a)=>{l.value=!0;const t=await k("admin/quote",{from:e,to:a}),r=35,n=0;i.value=t.users.map((e=>({...e,sell_perc:r,sell_amount:e.amount*r/100,acts_perc:n,acts_amount:0}))),u.value=t.totals,l.value=!1},H=()=>{p.commit("setDataFilter",a.value)};return(0,r.bv)((async()=>{a.value=p.state.data_filter_quote?p.state.data_filter_quote:await y("admin/quote/period"),q(a.value[0],a.value[1]),d.value=await y("admin/quotes"),m.value={title:{text:"Ore complessive per attività",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},series:[{name:"Spazio",type:"pie",radius:"64%",center:["50%","60%"],data:i.value.map((e=>({value:e.hours,name:e.subject}))),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},c.value={title:{text:"Importo per Vendite",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},series:[{name:"Spazio",type:"pie",radius:"64%",center:["50%","60%"],data:i.value.map((e=>{if("developer"!=e.role)return{value:e.amount,name:e.subject}})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}})),(0,r.aZ)({name:"QuoteView"}),(e,p)=>{const y=(0,r.up)("el-date-picker"),k=(0,r.up)("el-col"),W=(0,r.up)("el-button"),q=(0,r.up)("el-row"),z=(0,r.up)("el-table-column"),V=(0,r.up)("el-input-number"),M=(0,r.up)("el-table"),Y=(0,r.up)("el-card"),I=(0,r.up)("el-alert"),A=(0,r.up)("el-popconfirm"),N=(0,r.up)("el-tab-pane"),T=(0,r.up)("el-tabs"),O=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)(r.HY,null,[Pa,(0,r.Wm)(Y,{class:"box-card"},{default:(0,r.w5)((()=>[(0,r.Wm)(T,{modelValue:t.value,"onUpdate:modelValue":p[2]||(p[2]=e=>t.value=e),class:"act-tabs",type:"border-card"},{default:(0,r.w5)((()=>[(0,r.Wm)(N,{label:"Corrente",key:"current",name:"current"},{default:(0,r.w5)((()=>[Za,Ea,(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[(0,r.Wm)(k,{span:4},{default:(0,r.w5)((()=>[(0,r.Uk)(" Da: "),(0,r.Wm)(y,{modelValue:a.value[0],"onUpdate:modelValue":p[0]||(p[0]=e=>a.value[0]=e),type:"month",readonly:"",format:"MMMM YYYY","value-format":"YYYY-MM"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(k,{span:4},{default:(0,r.w5)((()=>[(0,r.Uk)(" A: "),(0,r.Wm)(y,{modelValue:a.value[1],"onUpdate:modelValue":p[1]||(p[1]=e=>a.value[1]=e),type:"month",format:"MMMM YYYY","value-format":"YYYY-MM",onChange:C},null,8,["modelValue"])])),_:1}),(0,r.Wm)(k,{span:4},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{type:"primary",onClick:H},{default:(0,r.w5)((()=>[(0,r.Uk)("Imposta intervallo come filtro per le Attività o Vendite")])),_:1})])),_:1})])),_:1}),Ra,Ba,(0,r.Wm)(Y,{shadow:"hover"},{header:(0,r.w5)((()=>[Qa])),default:(0,r.w5)((()=>[(0,r.Wm)(q,{gutter:16},{default:(0,r.w5)((()=>[(0,r.Wm)(k,{span:18},{default:(0,r.w5)((()=>[(0,r.wy)(((0,r.wg)(),(0,r.j4)(M,{data:i.value},{default:(0,r.w5)((()=>[(0,r.Wm)(z,{prop:"subject",label:"Soggetto"}),(0,r.Wm)(z,{prop:"role",label:"Ruolo Numie"}),(0,r.Wm)(z,{prop:"amount",label:"Importo per Vendite",align:"right",formatter:x}),(0,r.Wm)(z,null,{header:(0,r.w5)((()=>[(0,r.Uk)("Percentuale riconosciuta")])),default:(0,r.w5)((e=>[(0,r.Wm)(V,{disabled:s.value,modelValue:e.row.sell_perc,"onUpdate:modelValue":a=>e.row.sell_perc=a,min:0,max:100,label:"%",onChange:a=>_(e.row)},null,8,["disabled","modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,r.Wm)(z,{prop:"sell_amount",label:"Dividendi per Vendite",align:"right",formatter:x})])),_:1},8,["data"])),[[O,l.value]]),l.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(M,{key:0,data:[{label:"Totale Importo per Vendite",amount:u.value.amount},{label:"Totale Dividendi per Vendite",amount:w.value},{label:"Importo Residuo per Attività",amount:g.value}],style:{width:"50%"},"row-class-name":S},{default:(0,r.w5)((()=>[(0,r.Wm)(z,{prop:"label",formatter:D}),(0,r.Wm)(z,{prop:"amount",align:"right",formatter:x})])),_:1},8,["data"]))])),_:1}),(0,r.Wm)(k,{span:6},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(Re.ZP),{option:c.value,style:{height:"232px"},autoresize:""},null,8,["option"])])),_:1})])),_:1})])),_:1}),Ka,(0,r.Wm)(Y,{shadow:"hover"},{header:(0,r.w5)((()=>[$a])),default:(0,r.w5)((()=>[(0,r.Wm)(q,{gutter:16},{default:(0,r.w5)((()=>[(0,r.Wm)(k,{span:18},{default:(0,r.w5)((()=>[(0,r.wy)(((0,r.wg)(),(0,r.j4)(M,{data:i.value},{default:(0,r.w5)((()=>[(0,r.Wm)(z,{type:"expand"},{default:(0,r.w5)((e=>[(0,r.Wm)(M,{data:e.row.activities},{default:(0,r.w5)((()=>[(0,r.Wm)(z,{label:"#ID",prop:"id",width:64}),(0,r.Wm)(z,{label:"Data attività",prop:"data",width:128,formatter:U}),(0,r.Wm)(z,{label:"Ore",prop:"ore",width:64}),(0,r.Wm)(z,{label:"Descrizione attività",prop:"descrizione"})])),_:2},1032,["data"])])),_:1}),(0,r.Wm)(z,{prop:"subject",label:"Soggetto"}),(0,r.Wm)(z,{prop:"hours",label:"Ore complessive per attività",align:"right"}),(0,r.Wm)(z,null,{header:(0,r.w5)((()=>[(0,r.Uk)("Percentuale riconosciuta")])),default:(0,r.w5)((e=>[(0,r.Wm)(V,{disabled:s.value,modelValue:e.row.acts_perc,"onUpdate:modelValue":a=>e.row.acts_perc=a,min:0,max:100,label:"%",onChange:a=>h(e.row)},null,8,["disabled","modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,r.Wm)(z,{prop:"acts_amount",label:"Dividendi per attività",align:"right",formatter:x})])),_:1},8,["data"])),[[O,l.value]]),l.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(M,{key:0,data:[{label:"Importo Residuo per Attività",amount:g.value},{label:"Totale Dividendi per Attività",amount:v.value},{label:"Importo Residuo per Cassa",amount:b.value}],style:{width:"50%"},"row-class-name":S},{default:(0,r.w5)((()=>[(0,r.Wm)(z,{prop:"label",formatter:D}),(0,r.Wm)(z,{prop:"amount",align:"right",formatter:x})])),_:1},8,["data"]))])),_:1}),(0,r.Wm)(k,{span:6},{default:(0,r.w5)((()=>[(0,r.Wm)((0,o.SU)(Re.ZP),{option:m.value,style:{height:"232px"},autoresize:""},null,8,["option"])])),_:1})])),_:1})])),_:1}),Xa,(0,r.Wm)(Y,{shadow:"hover"},{header:(0,r.w5)((()=>[Ga])),default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[(0,r.Wm)(k,{span:18},{default:(0,r.w5)((()=>[(0,r.wy)(((0,r.wg)(),(0,r.j4)(M,{data:i.value},{default:(0,r.w5)((()=>[(0,r.Wm)(z,{prop:"subject",label:"Soggetto"}),(0,r.Wm)(z,{label:"Dividendo complessivo",align:"right",formatter:x},{default:(0,r.w5)((e=>[(0,r.Uk)((0,n.zw)(new Intl.NumberFormat("it-IT",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.row.sell_amount+e.row.acts_amount)),1)])),_:1})])),_:1},8,["data"])),[[O,l.value]]),l.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(M,{key:0,data:[{label:"Totale Dividendi complessivi",amount:f.value},{label:"Importo Residuo per Cassa",amount:b.value},{label:"Totale Dividendi + Residuo per cassa",amount:f.value+b.value}],style:{width:"50%"},"row-class-name":S},{default:(0,r.w5)((()=>[(0,r.Wm)(z,{prop:"label",formatter:D}),(0,r.Wm)(z,{prop:"amount",align:"right",formatter:x})])),_:1},8,["data"]))])),_:1})])),_:1})])),_:1}),Ja,(0,r.Wm)(I,{title:"Attenzione! Dopo il salvataggio non sarà più possibile modificare o cancellare il Quadro dei dividendi. Verifica i dati prima di procedere.","show-icon":"",type:"warning"}),et,at,(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[(0,r.Wm)(k,{span:24,style:{"text-align":"center"}},{default:(0,r.w5)((()=>[(0,r.Wm)(A,{title:"Procedere con il salvataggio?",onConfirm:j,"confirm-button-text":"Si"},{reference:(0,r.w5)((()=>[(0,r.Wm)(W,{type:"success",loading:s.value},{default:(0,r.w5)((()=>[(0,r.Uk)("Salva")])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1}),tt,lt])),_:1}),(0,r.Wm)(N,{label:"Storico",key:"history",name:"history"},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{data:d.value},{default:(0,r.w5)((()=>[(0,r.Wm)(z,{type:"expand"},{default:(0,r.w5)((e=>[(0,r.Wm)(M,{data:e.row.details},{default:(0,r.w5)((()=>[(0,r.Wm)(z,{label:"Soggetto"},{default:(0,r.w5)((e=>[(0,r.Uk)((0,n.zw)(e.row.user.name)+" "+(0,n.zw)(e.row.user.surname),1)])),_:1}),(0,r.Wm)(z,{label:"Percentuale vendita",prop:"percentuale_vendita",align:"right"}),(0,r.Wm)(z,{label:"Dividendo vendita",prop:"dividendo_vendita",formatter:x,align:"right"}),(0,r.Wm)(z,{label:"Percentuale attivita",prop:"percentuale_attivita",align:"right"}),(0,r.Wm)(z,{label:"Dividendo attivita",prop:"dividendo_attivita",formatter:x,align:"right"})])),_:2},1032,["data"])])),_:1}),(0,r.Wm)(z,{prop:"periodo_da",sortable:"",label:"Da",formatter:U}),(0,r.Wm)(z,{prop:"periodo_a",sortable:"",label:"A",formatter:U}),(0,r.Wm)(z,{prop:"importo_totale",sortable:"",label:"Importo Totale",align:"right",formatter:x}),(0,r.Wm)(z,{prop:"dividendo_vendita_totale",sortable:"",label:"Dividendo vendita totale",align:"right",formatter:x}),(0,r.Wm)(z,{prop:"dividendo_attivita_totale",sortable:"",label:"Dividendo attivita totale",align:"right",formatter:x}),(0,r.Wm)(z,{prop:"importo_residuo_cassa",sortable:"",label:"Importo residuo cassa",align:"right",formatter:x})])),_:1},8,["data"])])),_:1})])),_:1},8,["modelValue"])])),_:1})],64)}}};const nt=rt;var ot=nt;const it=(0,r._)("h3",null,"System Log",-1),ut=["innerHTML"];var st={__name:"SystemLog",setup(e){const a=(0,o.iH)(!1),t=(0,o.iH)(!1),l=(0,o.iH)(""),n=(0,o.iH)([]),i=(0,o.iH)(null),u=async(e,a)=>{t.value=!0;const r=await x("admin/log",a.filename);i.value=r,l.value=a.filename,t.value=!1},s=async(e,t)=>{a.value=!0;const l=await U("admin/log",t.filename);l&&(n.value=n.value.filter((e=>e.filename!==t.filename))),a.value=!1};return(0,r.bv)((async()=>{a.value=!0;const e=await y("admin/logs");n.value=e,a.value=!1})),(0,r.aZ)({name:"SystemLogView"}),(e,d)=>{const m=(0,r.up)("el-table-column"),c=(0,r.up)("el-button"),p=(0,r.up)("el-popconfirm"),w=(0,r.up)("el-table"),v=(0,r.up)("el-col"),f=(0,r.up)("el-row"),g=(0,r.up)("el-card"),b=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)(r.HY,null,[it,(0,r.Wm)(g,{class:"box-card"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{gutter:16},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{span:6},{default:(0,r.w5)((()=>[(0,r.wy)(((0,r.wg)(),(0,r.j4)(w,{data:n.value,style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{prop:"filename",label:"Log File"}),(0,r.Wm)(m,{width:"128"},{default:(0,r.w5)((e=>[(0,r.Wm)(p,{title:"Procedere con la cancellazione?",onConfirm:a=>s(e.$index,e.row),"confirm-button-text":"Si"},{reference:(0,r.w5)((()=>[(0,r.Wm)(c,{icon:(0,o.SU)(j.HG3)},null,8,["icon"])])),_:2},1032,["onConfirm"]),(0,r.Wm)(c,{icon:(0,o.SU)(j.olm),onClick:a=>u(e.$index,e.row)},null,8,["icon","onClick"])])),_:1})])),_:1},8,["data"])),[[b,a.value]])])),_:1}),(0,r.Wm)(v,{span:18},{default:(0,r.w5)((()=>[(0,r.wy)(((0,r.wg)(),(0,r.j4)(w,{data:i.value,style:{width:"100%"},height:"600","empty-text":"Seleziona un file"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{prop:"content",label:l.value},{default:(0,r.w5)((e=>[(0,r._)("div",{innerHTML:e.row.content},null,8,ut)])),_:1},8,["label"])])),_:1},8,["data"])),[[b,t.value]])])),_:1})])),_:1})])),_:1})],64)}}};const dt=st;var mt=dt;const ct=[{path:"/",component:ha},{path:"/activity",component:Ma},{path:"/sells",component:La},{path:"/quote",component:ot},{path:"/logs",component:mt}],pt=(0,We.p7)({history:(0,We.PO)(),routes:ct}),wt=(0,l.ri)(Me);wt.use(Ye.Z,{locale:Ie.Z}),wt.use(pt),wt.use(p),wt.mount("#app")}},a={};function t(l){var r=a[l];if(void 0!==r)return r.exports;var n=a[l]={exports:{}};return e[l].call(n.exports,n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(a,l,r,n){if(!l){var o=1/0;for(d=0;d<e.length;d++){l=e[d][0],r=e[d][1],n=e[d][2];for(var i=!0,u=0;u<l.length;u++)(!1&n||o>=n)&&Object.keys(t.O).every((function(e){return t.O[e](l[u])}))?l.splice(u--,1):(i=!1,n<o&&(o=n));if(i){e.splice(d--,1);var s=r();void 0!==s&&(a=s)}}return a}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[l,r,n]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(a){return 0===e[a]};var a=function(a,l){var r,n,o=l[0],i=l[1],u=l[2],s=0;if(o.some((function(a){return 0!==e[a]}))){for(r in i)t.o(i,r)&&(t.m[r]=i[r]);if(u)var d=u(t)}for(a&&a(l);s<o.length;s++)n=o[s],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(d)},l=self["webpackChunkNumieport"]=self["webpackChunkNumieport"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var l=t.O(void 0,[998],(function(){return t(4092)}));l=t.O(l)})();
//# sourceMappingURL=app.31b4840b.js.map